name: run-sitemap

on: [push] # 触发条件，当代码 push 到指定分支时触发

jobs:
  build:
    runs-on: ubuntu-latest # 运行环境

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2 # 从 GitHub 拉取代码

    - name: Install Python and dependencies
      run: |
        sudo apt-get update
        sudo apt-get install python3-pip -y
        sudo pip3 install -r requirements.txt # 安装依赖

    - name: Download and install ChromeDriver
      run: |
        wget https://chromedriver.storage.googleapis.com/94.0.4606.61/chromedriver_linux64.zip
        unzip chromedriver_linux64.zip
        sudo mv chromedriver /usr/local/bin/
        sudo chmod +x /usr/local/bin/chromedriver # 下载和安装 ChromeDriver

    - name: Run Python script
      run: |
        python3 run-sitemap.py # 运行 Python 脚本
